# æ•°æ®å¤„ç†æµç¨‹è¯¦ç»†è§£æ

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

ä½ çš„æ··æ·†å¾ˆæ­£å¸¸ï¼è¿™äº›è„šæœ¬å…¶å®åˆ†ä¸º**ä¸¤ç§æ¨¡å¼**ï¼š

### æ¨¡å¼1: æœ¬åœ°JSON â†’ æ¸…ç† â†’ JSONLï¼ˆBioASQï¼‰
### æ¨¡å¼2: åœ¨çº¿APIç›´æ¥è·å– â†’ æ¸…ç† â†’ JSONLï¼ˆé‡‘èæ•°æ®ï¼‰

---

## ğŸ“Š è¯¦ç»†æµç¨‹å¯¹æ¯”

### ğŸŸ¦ **BioASQ æ•°æ®ï¼ˆclean_bioasq_for_mlm.pyï¼‰**

```
ç¬¬1æ­¥ï¼šæ£€æŸ¥æœ¬åœ°æ–‡ä»¶
    â””â”€ ä½ç½®ï¼šdata/raw/bioasq/
    â””â”€ æ–‡ä»¶ï¼šBioASQ-train-factoid-6b-full-annotated.json

ç¬¬2æ­¥ï¼šå¦‚æœä¸å­˜åœ¨ï¼Œè‡ªåŠ¨ä¸‹è½½
    â””â”€ æ¥æºï¼šKaggle
    â””â”€ å‘½ä»¤ï¼škagglehub.dataset_download("maverickss26/bioasq-dataset")
    â””â”€ ä¿å­˜åˆ°ï¼šdata/raw/bioasq/

ç¬¬3æ­¥ï¼šè¯»å–JSONï¼Œæå–textå­—æ®µ
    â”Œâ”€ æ‰“å¼€ï¼šdata/raw/bioasq/BioASQ-train-factoid-6b-full-annotated.json
    â”œâ”€ è§£ææ ¼å¼ï¼šobj["data"][article]["paragraphs"][para]["context"]
    â”œâ”€ æ¸…ç†ï¼šå»é™¤å¤šä½™ç©ºæ ¼ï¼Œå»é™¤<30å­—çš„çŸ­æ–‡æœ¬
    â””â”€ å»é‡ï¼šç›¸åŒæ–‡æœ¬åªä¿ç•™ä¸€æ¬¡

ç¬¬4æ­¥ï¼šè¾“å‡ºåˆ°JSONL
    â””â”€ ä½ç½®ï¼šdata/processed/biomed_mlm.jsonl
    â””â”€ æ ¼å¼ï¼šæ¯è¡Œä¸€ä¸ªJSON {"text": "..."}
    â””â”€ ç»“æœï¼š2,511 è¡Œï¼Œ3.7M
```

**æµç¨‹**ï¼š
```
Kaggle JSONæ–‡ä»¶
    â†“
kagglehubè‡ªåŠ¨ä¸‹è½½ (å¦‚æœä¸å­˜åœ¨)
    â†“
data/raw/bioasq/*.json
    â†“
Pythonè¯»å– + æå– + æ¸…ç†
    â†“
data/processed/biomed_mlm.jsonl
    â†“
âœ… å¯ç”¨äºè®­ç»ƒ
```

---

### ğŸŸ¨ **é‡‘èæ•°æ®ï¼ˆclean_financial_for_llm_2.pyï¼‰**

```
ç¬¬1æ­¥ï¼šä»HuggingFaceç›´æ¥è·å–æ•°æ®
    â”œâ”€ æ•°æ®é›†1ï¼šlukecarlate/english_finance_news
    â”‚   â””â”€ è‡ªåŠ¨ä»HFä¸‹è½½ï¼Œä¸éœ€è¦æœ¬åœ°JSON
    â”‚
    â””â”€ æ•°æ®é›†2ï¼štakala/financial_phrasebank (parquetæ ¼å¼)
        â””â”€ ä¹Ÿæ˜¯ç›´æ¥ä»URLåŠ è½½

ç¬¬2æ­¥ï¼šæ¸…ç†æ•°æ®
    â”œâ”€ æå–æ–‡æœ¬å­—æ®µ
    â”œâ”€ å»é™¤å¤šä½™ç©ºæ ¼
    â”œâ”€ å»é™¤<30å­—çš„çŸ­æ–‡æœ¬
    â””â”€ å»é‡

ç¬¬3æ­¥ï¼šè¾“å‡ºåˆ°JSONL
    â””â”€ ä½ç½®ï¼šdata/processed/finance_mlm1.jsonl
    â””â”€ æ ¼å¼ï¼šæ¯è¡Œä¸€ä¸ªJSON {"text": "..."}
```

**æµç¨‹**ï¼š
```
HuggingFace (åœ¨çº¿API)
    â†“
load_dataset() ç›´æ¥ä¸‹è½½
    â†“
Pythonå¤„ç† + æ¸…ç†
    â†“
data/processed/finance_mlm1.jsonl
    â†“
âœ… å¯ç”¨äºè®­ç»ƒ
```

---

## ğŸ”‘ **å…³é”®åŒºåˆ«**

| æ–¹é¢ | BioASQ | é‡‘èæ•°æ® |
|------|--------|---------|
| **åŸå§‹æ•°æ®ä½ç½®** | æœ¬åœ° JSON æ–‡ä»¶ | åœ¨çº¿ï¼ˆHuggingFace APIï¼‰ |
| **æ˜¯å¦éœ€è¦æ‰‹åŠ¨ä¸‹è½½** | å¯é€‰ï¼ˆè„šæœ¬ä¼šè‡ªåŠ¨Kaggleä¸‹è½½ï¼‰ | å¦ï¼ˆè„šæœ¬è‡ªåŠ¨ä»HFä¸‹è½½ï¼‰ |
| **rawç›®å½•ä½œç”¨** | å­˜å‚¨åŸå§‹JSONæ–‡ä»¶ | å‡ ä¹ä¸ç”¨ï¼ˆç›´æ¥ä»APIè¯»ï¼‰ |
| **è„šæœ¬åšä»€ä¹ˆ** | è¯»æœ¬åœ°JSON â†’ æå– â†’ æ¸…ç† â†’ JSONL | è°ƒç”¨API â†’ æå– â†’ æ¸…ç† â†’ JSONL |
| **æ˜¯å¦éœ€è¦rawæ–‡ä»¶** | **éœ€è¦** | **ä¸éœ€è¦** |

---

## ğŸ“ **æ–‡ä»¶ç»“æ„å®é™…æƒ…å†µ**

### ç°åœ¨çš„çŠ¶æ€ï¼š

```
data/
â”œâ”€â”€ raw/
â”‚   â”œâ”€â”€ bioasq/
â”‚   â”‚   â””â”€â”€ BioASQ-train-factoid-6b-full-annotated.json  âœ… å·²å­˜åœ¨ï¼
â”‚   â”‚
â”‚   â””â”€â”€ financial/
â”‚       â””â”€â”€ (ç©ºæˆ–ä¸ç”¨)
â”‚
â””â”€â”€ processed/
    â”œâ”€â”€ biomed_mlm.jsonl        âœ… å·²ç”Ÿæˆ (2,511è¡Œ)
    â”œâ”€â”€ biomed_mlm_2.jsonl      âœ… å·²ç”Ÿæˆ (11,145è¡Œ)
    â”œâ”€â”€ finance_mlm1.jsonl      âŒ æœªç”Ÿæˆ (ä¸éœ€è¦)
    â””â”€â”€ finance_mlm2.jsonl      âŒ æœªç”Ÿæˆ (ä¸éœ€è¦)
```

---

## ğŸ”„ **BioASQå…·ä½“æµç¨‹è¯´æ˜**

ä½ æœ‰ï¼š
```
data/raw/bioasq/BioASQ-train-factoid-6b-full-annotated.json (åŸå§‹JSON)
```

è¿è¡Œè„šæœ¬åï¼š
```
1. è„šæœ¬æ‰“å¼€è¿™ä¸ªJSONæ–‡ä»¶
2. çœ‹åˆ°æ ¼å¼æ˜¯ï¼š
   {
     "data": [
       {
         "id": "...",
         "title": "...",
         "paragraphs": [
           {
             "context": "The patient has pneumonia in the left lung...",
             "qas": [...]
           }
         ]
       }
     ]
   }

3. è„šæœ¬å¾ªç¯éå†æ‰€æœ‰paragraphs
4. æå–æ¯ä¸ª context å­—æ®µçš„æ–‡æœ¬
5. æ¸…ç†æ ¼å¼ï¼ˆå»é™¤å¤šä½™ç©ºæ ¼ã€çŸ­å¥å­ï¼‰
6. å»é‡
7. æ¯ä¸ªæ–‡æœ¬å†™ä¸€è¡Œåˆ° biomed_mlm.jsonl
```

**ç»“æœ**ï¼š
```
biomed_mlm.jsonl
â”€ {"text": "The patient has pneumonia in the left lung..."}
â”€ {"text": "Chest X-ray shows infiltration..."}
â”€ {"text": "CT scan reveals..."}
...ï¼ˆå…±2,511æ¡ï¼‰
```

---

## ğŸ’¡ **ä¸ºä»€ä¹ˆéœ€è¦rawå’Œprocessedä¸¤ä¸ªç›®å½•ï¼Ÿ**

### rawç›®å½•
- å­˜å‚¨**åŸå§‹ã€æœªå¤„ç†çš„æ•°æ®**
- BioASQçš„rawæ˜¯JSONæ ¼å¼ï¼ˆæœºå™¨éš¾ä»¥å¤„ç†ï¼‰
- ç›®çš„ï¼šä¿ç•™åŸå§‹æ•°æ®å¤‡ä»½

### processedç›®å½•
- å­˜å‚¨**æ¸…ç†åã€å¯ç›´æ¥ç”¨äºè®­ç»ƒçš„æ•°æ®**
- éƒ½æ˜¯JSONLæ ¼å¼ï¼ˆæœºå™¨æ˜“å¤„ç†ï¼‰
- ç›®çš„ï¼šç”¨äºè®­ç»ƒ

**ç±»æ¯”**ï¼š
```
raw = æ–°é²œè”¬èœï¼ˆéœ€è¦æ´—ã€åˆ‡ï¼‰
processed = æ´—å¥½åˆ‡å¥½çš„è”¬èœï¼ˆå¯ç›´æ¥ç‚’ï¼‰
```

---

## â“ **ä½ çš„é—®é¢˜é€ä¸€è§£ç­”**

### Q: "clean_financial_for_llm é‚£ä¸ªæ˜¯ç›´æ¥å¯ä»¥ä¸‹è½½æ•°æ®å—ï¼Ÿ"
**A**: âœ… æ˜¯çš„ï¼è„šæœ¬é‡Œç”¨ `load_dataset()` ç›´æ¥ä»HuggingFaceä¸‹è½½ï¼Œä¸éœ€è¦ä½ æ‰‹åŠ¨ä¸‹è½½JSONã€‚

### Q: "é‚£ä¹ˆé‚£ä¸ªæˆ‘ä»¬ä¹‹å‰è·‘çš„bioasqé‚£ä¸ªå‘¢ï¼Ÿ"
**A**: BioASQ ä½ å·²ç»æœ‰äº†æœ¬åœ°JSONæ–‡ä»¶ (`data/raw/bioasq/BioASQ-train-factoid-6b-full-annotated.json`)ï¼Œè„šæœ¬ç›´æ¥è¯»è¿™ä¸ªæ–‡ä»¶ã€‚

### Q: "ä¸æ˜¯éœ€è¦å…ˆæœ‰jsonæ–‡ä»¶å†æ¸…ç†å—ï¼Ÿ"
**A**: âœ… å¯¹ï¼ä½†è¿™å¯¹BioASQå’Œé‡‘èæ•°æ®æ¥è¯´æµç¨‹ä¸åŒï¼š
- **BioASQ**ï¼šä½ å·²ç»æœ‰JSONäº† â†’ è„šæœ¬è¯»å– â†’ æ¸…ç† â†’ ç”ŸæˆJSONL
- **é‡‘èæ•°æ®**ï¼šè„šæœ¬åœ¨çº¿è·å– â†’ æ¸…ç† â†’ ç”ŸæˆJSONLï¼ˆæ²¡æœ‰æœ¬åœ°JSONæ–‡ä»¶ï¼‰

### Q: "ç„¶åè¿™ä¸ªpyå¯ä»¥ç›´æ¥è·å¾—æ¸…ç†åçš„ï¼Ÿ"
**A**: âœ… å®Œå…¨æ­£ç¡®ï¼è¿è¡Œè„šæœ¬ â†’ è‡ªåŠ¨ç”Ÿæˆ `processed/*.jsonl` â†’ å¯ç›´æ¥ç”¨äºè®­ç»ƒ

---

## ğŸ¯ **æ€»ç»“**

```
BioASQæµç¨‹ï¼ˆä½ å·²ç»åšè¿‡ï¼‰ï¼š
raw/*.json å­˜åœ¨ â†’ è„šæœ¬è¯»å– â†’ processed/*.jsonl ç”Ÿæˆ âœ…

é‡‘èæ•°æ®æµç¨‹ï¼ˆè¿˜æ²¡åšï¼‰ï¼š
HF API â†’ è„šæœ¬è·å– â†’ processed/*.jsonl ç”Ÿæˆ âŒï¼ˆå¯é€‰ï¼‰

ç”Ÿç‰©åŒ»å­¦å¤šè¯­è¨€æµç¨‹ï¼ˆä½ å·²ç»åšè¿‡ï¼‰ï¼š
HF API â†’ è„šæœ¬è·å– â†’ processed/*.jsonl ç”Ÿæˆ âœ…
```

---

**ç°åœ¨æ¸…æ¥šäº†å—ï¼Ÿ** ğŸ˜Š
